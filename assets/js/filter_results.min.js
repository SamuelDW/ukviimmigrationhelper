let nameBeingChangedInput=document.querySelector("#name-being-changed-select"),table=document.querySelector("#skype-table"),removeSelectBox=document.querySelector("#select-remove"),nameReplacingInput=document.querySelector("#name-desired-input");function addToChangedContacts(e,n){return 0===n.length?(n.push(e),n):(n.forEach(t=>{t.originalName===e.originalName?t.newName=e.newName:n.push(t)}),n)}function removeDuplicates(e){return[...new Set(e)]}function removeCallsByPerson(e,n,t){let a=e.rows;for(let e=a.length;e>0;e--)a[e-1].cells[t].innerHTML===n&&a[e-1].classList.add("hidden")}function changeNamesInTable(e,n,t){let a=n.value,o=t.value;for(let n=0;n<e.rows.length;n++){let t=e.rows[n].cells[2].childNodes,l=e.rows[n].cells[3];t[0].innerHTML=t[0].innerHTML===a?t[0].innerHTML=o:t[0].innerHTML,t[1].innerHTML=t[1].innerHTML===a?t[1].innerHTML=o:t[1].innerHTML,l.innerHTML=l.innerHTML===a?l=o:l.innerHTML}}function showRowsBySpecificYear(e,n){for(let t=e.rows.length;t>0;t--){e.rows[t-1].cells[0].innerHTML.split("/")[2]===n&&e.rows[t-1].classList.add("hidden")}}function updateSelectBoxes(e,n,t){t.forEach(t=>{for(let a=0;a<t.length;a++)n.includes(t[a].value)&&(t[a].text=e)})}function resetSelectBoxes(e,n){let t=document.getElementById(n).value;e.forEach(e=>{e.options.length=1,t.forEach(n=>{let t=document.createElement("option");t.value=n,t.text=n,e.appendChild(t)})})}function resetTable(e){let n=e.lastElementChild;document.querySelectorAll(".table-remove-row-checkbox").forEach(e=>{e.checked=!1});for(let e=0;e<n.rows.length;e++)n.rows[e].classList.contains("hidden")&&n.rows[e].classList.remove("hidden")}function resetTableNames(e,n){for(let t=0;t<n.rows.length;t++){let a=n.rows[t].cells[2].childNodes,o=n.rows[t].cells[3],l=a[0],c=a[1];e.forEach(e=>{o.innerHTML===e.newName&&(o.innerHTML=e.originalName),l.innerHTML===e.newName&&(l.innerHTML=e.originalName),c.innerHTML===e.newName&&(c.innerHTML=e.originalName)})}}replaceButton=document.querySelector("#replace-button"),yearSelector=document.querySelector("#year-selector"),resetTableButton=document.querySelector("#reset-table"),originalContacts=[],newContacts=[],changingContacts=[],selectBoxesContacts=[nameBeingChangedInput,removeSelectBox],removeSelectBox.addEventListener("change",function(){removeCallsByPerson(table,removeSelectBox.value,3)}),replaceButton.addEventListener("click",function(){newContacts.push(nameReplacingInput.value),originalContacts.push(nameBeingChangedInput.value);let e={originalName:nameBeingChangedInput.value,newName:nameReplacingInput.value};changingContacts=addToChangedContacts(e,changingContacts),originalContacts=removeDuplicates(originalContacts),newContacts=removeDuplicates(newContacts),changeNamesInTable(table,nameBeingChangedInput,nameReplacingInput),updateSelectBoxes(nameReplacingInput.value,originalContacts,selectBoxesContacts)}),yearSelector.addEventListener("keydown",function(){showRowsBySpecificYear(table,yearSelector.value)}),resetTableButton.addEventListener("click",function(){resetTable(table),resetSelectBoxes(selectBoxesContacts,"contacts-hidden"),resetTableNames(changingContacts,table)});
